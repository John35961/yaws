{% extends "base.html" %}
{% block title %} yaws | Home {% endblock %}
{% block content %}
    <div class="row text-center">
        <div class="col-md-12 p-5">
            <h1 class="home-title no-select">yaws</h1>
            <div class="text-secondary no-select">
                <p>Yet another weather service ;)</p>
            </div>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col-md-8 pt-5">
            <form action="{{ url_for('weather_blueprint.home') }}" method="POST">
                <div class="input-group mb-3">
                    {{ city_form.location(class_="search-bar tt-query form-control form-control-md", placeholder="Enter a location", type="text", autocomplete="off", spellcheck="false") }}
                    <div>
                        {{ city_form.submit(class_="btn btn-md btn-outline-primary") }}
                    </div>
                </div>
            </form> 
        </div>
    </div>
    <div class="row">
        <div class="d-flex justify-content-center col-md-12 pt-2 mb-3 no-select">
            <a href="{{ url_for('map_blueprint.map') }}" class="pr-5"><i class="fas fa-map-marker-alt links-secondary pr-2"></i>Use map mode</a>
            <a href="{{ url_for('weather_blueprint.top_searches') }}"><i class="fas fa-arrow-up links-secondary pr-2"></i>Top searches</a>
        </div>
    </div>
    {% if cache.get("locations_counter") %}
        <p class="text-secondary text-center no-select mt-4 mb-0">Recent searches</p>
        <div class="row justify-content-center">
            {% for i in cache.get("user_recent_locations_data")[:3] %}
                <div class="col-xs-3">
                    <div class="d-flex pt-3 no-select">
                        <div class="card mr-2">
                            <div class="card-body pb-0">
                                <div class="card-title">
                                    <a href="/?location={{ i[0] }}"><h5 class="links-secondary">{{ i[0] }} ({{ i[1] }})</h5></a>
                                </div>
                            </div>
                            <div class="card-text">
                                <div class="d-flex justify-content-center align-items-center">
                                    <img class="icon-box mr-3 mb-2" src="http://openweathermap.org/img/wn/{{ i[3] }}.png" width="10px" heigth="10px">
                                    <h4>{{ i[2] }}</h4>
                                    <h5 class="mt-1 weather_temp_unit">Â°C</h5>
                                </div>
                                <p class="text-center">{{ i[4] }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}